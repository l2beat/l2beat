{"isUnderReview":false,"type":"layer2","id":"metis","badges":["EVM","CustomDA","OVM"],"display":{"name":"Metis Andromeda","shortName":"Metis","slug":"metis","description":"Metis Andromeda is an EVM-equivalent solution originally forked from Optimism OVM. Since April 2024 hashes of data blobs are posted to EOA similarly to OPStack chains. It uses a decentralized Sequencer pool running Tendermint consensus and MPC module to sign transaction batches.","warning":"Fraud proof system is currently under development. Users need to trust the block proposer to submit correct L1 state roots.","purposes":["Universal"],"provider":"OVM","category":"Optimium","links":{"websites":["https://metis.io"],"apps":["https://bridge.metis.io"],"documentation":["https://docs.metis.io"],"explorers":["https://andromeda-explorer.metis.io","https://explorer.metis.io"],"repositories":["https://github.com/MetisProtocol"],"socialMedia":["https://metisl2.medium.com/","https://twitter.com/MetisL2","https://discord.com/invite/metis","https://youtube.com/@Metis_L2","https://t.me/MetisL2","https://instagram.com/metisl2/"]},"activityDataSource":"Blockchain RPC"},"stage":{"stage":"NotApplicable"},"chainConfig":{"name":"metis","chainId":1088,"explorerUrl":"https://explorer.metis.io","explorerApi":{"url":"https://api.routescan.io/v2/network/mainnet/evm/1088/etherscan/api","type":"etherscan"},"minTimestampForTvl":1637270379,"multicallContracts":[{"address":"0xcA11bde05977b3631167028862bE2a173976CA11","batchSize":150,"sinceBlock":2338552,"version":"3","isNativeBalanceSupported":false}],"coingeckoPlatform":"metis"},"config":{"associatedTokens":["Metis"],"escrows":[{"address":"0x3980c9ed79d2c191A89E02Fa3529C60eD6e9c04b","sinceTimestamp":1637077208,"tokens":"*","chain":"ethereum","premintedTokens":["Metis"]}],"transactionApi":{"type":"rpc","defaultUrl":"https://andromeda.metis.io/","defaultCallsPerMinute":1500,"startBlock":1}},"dataAvailability":{"layer":{"value":"MEMO","sentiment":"warning","description":"The data is posted to MEMO (a decentralized storage)."},"bridge":{"value":"None","sentiment":"bad","description":"There is no bridge that can attest if the data has been made available."},"mode":"Transaction data"},"riskView":{"stateValidation":{"value":"None","description":"Currently the system permits invalid state roots. More details in project overview.","sentiment":"bad","definingMetric":null,"secondLine":"7d challenge period"},"dataAvailability":{"value":"External (MEMO)","description":"Transaction data is kept in MEMO decentralized storage.","sentiment":"bad","definingMetric":null},"exitWindow":{"value":"None","description":"There is no window for users to exit in case of an unwanted regular upgrade since contracts are instantly upgradable.","sentiment":"bad","definingMetric":0},"sequencerFailure":{"value":"Enqueue via L1","description":"Users can submit transactions to an L1 queue, but can't force them. The sequencer cannot selectively skip transactions but can stop processing the queue entirely. In other words, if the sequencer censors or is down, it is so for everyone.","sentiment":"warning","sources":[{"contract":"CanonicalTransactionChain","references":["https://etherscan.io/address/0x56a76bcC92361f6DF8D75476feD8843EdC70e1C9#code#F1#L212"]}]},"proposerFailure":{"value":"Cannot withdraw","description":"Only the whitelisted proposers can publish state roots on L1, so in the event of failure the withdrawals are frozen.","sentiment":"bad","definingMetric":null},"destinationToken":{"value":"Native & Canonical","description":"METIS transferred via this bridge is used to pay for gas and other tokens transferred are considered canonical on the destination chain.","sentiment":"good"},"validatedBy":{"value":"Ethereum","description":"Smart contracts on Ethereum validate all bridge transfers.","sentiment":"good"}},"technology":{"stateCorrectness":{"name":"No automatic on-chain fraud proof system","description":"For additional security, any staked Validator can challenge invalid state root submitted by the Sequencer. Other Validators will then act as referees in an interactive challenge game. Dishonest Validator majority can push invalid state root on-chain, and potentially slash honest Sequencer.","risks":[{"category":"Funds can be stolen if","text":"an invalid state root is submitted to the system.","isCritical":true}],"references":[{"text":"MVM_Verifier.sol#L133 - Metis source code","href":"https://github.com/MetisProtocol/mvm/blob/develop/packages/contracts/contracts/MVM/MVM_Verifier.sol#L133"}]},"dataAvailability":{"name":"Data is recorded off-chain in MEMO","description":"Transaction data is not stored on-chain, rather it is recorded in off-chain decentralized storage         MEMO from MemoLabs. Data hashes are posted to an EOA address.","risks":[{"category":"Funds can be stolen if","text":"sequencer withholds data for more than seven days while at the same time submits fraudulent state root.","isCritical":true}],"references":[{"text":"The Tech Journey: Lower Gas Costs & Storage Layer on Metis","href":"https://metisdao.medium.com/the-tech-journey-lower-gas-costs-storage-layer-on-metis-867ddcf6d381"}]},"operator":{"name":"The system has a decentralized sequencer set","description":"As of April 2024 Metis uses a permissioned sequencer pool running a Tendermint consensus. Once consensus is reached on a block, an MPC address is used to submit a block hash to Ethereum. The infrastructure to manage the MPC is offchain and not trustless because Ethereum does not verify the validity of MPC address.","risks":[{"category":"MEV can be extracted if","text":"the operator exploits their centralized position and frontruns user transactions."}],"references":[{"text":"Decentralized Sequencer - Metis documentation","href":"https://docs.metis.io/dev/decentralized-sequencer/overview"}]},"forceTransactions":{"name":"Users can enqueue transactions","description":"Users can submit transactions to an L1 queue, but can't force them. The sequencer cannot selectively skip transactions but can stop processing the queue entirely. In other words, if the sequencer censors or is down, it is so for everyone.","risks":[{"category":"Users can be censored if","text":"the operator is offline or refuses to process the queue."}],"references":[{"text":"CanonicalTransactionChain - Etherscan source code","href":"https://etherscan.io/address/0x56a76bcC92361f6DF8D75476feD8843EdC70e1C9#code"}]},"exitMechanisms":[{"name":"Regular exit","description":"The user initiates the withdrawal by submitting a regular transaction on this chain. When the block containing that transaction is finalized the funds become available for withdrawal on L1. The process of block finalization usually takes several days to complete. Finally the user submits an L1 transaction to claim the funds. This transaction requires a merkle proof.","risks":[{"category":"Funds can be frozen if","text":"the centralized validator goes down. Users cannot produce blocks themselves and exiting the system requires new block production.","isCritical":true}],"references":[{"text":"Withdrawing from Metis - Metis documentation","href":"https://docs.metis.io/building-on-metis/metis-bridge#withdrawing-from-metis"}]},{"name":"Forced exit","description":"If the user experiences censorship from the operator with regular exit they can submit their withdrawal requests directly on L1. The system is then obliged to service this request or halt all messages from L1, including all forced withdrawals and deposits. Once the force operation is submitted and if the request is serviced, the operation follows the flow of a regular exit.","risks":[],"references":[]}],"otherConsiderations":[{"name":"EVM compatible smart contracts are supported","description":"Metis uses the Optimistic Virtual Machine (OVM) 2.0 to execute transactions.","risks":[{"category":"Funds can be lost if","text":"there are mistakes in the highly complex OVM implementation."}],"references":[{"text":"MVM repository - Metis source code","href":"https://github.com/MetisProtocol/mvm"}]}]},"permissions":[{"name":"Sequencer","accounts":[{"address":"0x1A9da0aedA630dDf2748a453BF6d92560762D914","type":"EOA"}],"description":"Central actor allowed to commit transactions to L1."},{"name":"Metis Multisig","description":"This is a Gnosis Safe with 4 / 9 threshold.  This address is the owner of all the upgradable contracts of the system. This allows it to censor messages or pause message bridge altogether, upgrade bridge implementation potentially gaining access to all funds stored in a bridge and change the sequencer, state root proposer or any other system component (unlimited upgrade power).","accounts":[{"address":"0x48fE1f85ff8Ad9D088863A42Af54d06a1328cF21","type":"MultiSig"}],"chain":"ethereum","participants":[{"address":"0x1577D2b835f561BD021E3219Cd786181D0e17ff5","type":"EOA"},{"address":"0x36B892a31b311E5e9960739A69D2dF0aa0F81A01","type":"EOA"},{"address":"0x001088E383A00ff4ab36F37f7021Cb6d7B415751","type":"EOA"},{"address":"0x217fD54d336f710F8aee19572dBfBf0B2297ed69","type":"EOA"},{"address":"0xB383E1331dEE29864b68f7D84b0dC289F770d846","type":"EOA"},{"address":"0x7a9059F4A6e50090e4f55994d465918200AB4454","type":"EOA"},{"address":"0x02058Bb1d98D88087008F2ac1273584591380e3F","type":"EOA"},{"address":"0xB961047013F974C5b6B6F8dA4402379525316550","type":"EOA"},{"address":"0xa6D8941F935932a531A856C2e48046DA73a1098E","type":"EOA"}]},{"name":"State Root Proposer","accounts":[{"address":"0xf3CEB4C2ef996CdBc95C4E18c6D0CA988CC09040","type":"EOA"}],"description":"Central actor to post new state roots to L1."},{"name":"Execution Verifiers","accounts":[{"address":"0x48fE1f85ff8Ad9D088863A42Af54d06a1328cF21","type":"EOA"}],"description":"Those addresses can challenge the state roots submitted by the state root proposer."}],"contracts":{"addresses":[{"name":"MVM_Verifier","address":"0xe70DD4dE81D282B3fa92A6700FEE8339d2d9b5cb","upgradeability":{"proxyType":"EIP1967 proxy","admins":["0x48fE1f85ff8Ad9D088863A42Af54d06a1328cF21"],"implementations":["0x47b5A78E127Dfd521532Fdca89651c832Acb7e0E"]},"chain":"ethereum","description":"This contract implements a voting scheme with which the majority of Verifiers can challenge malicious state roots proposed. There are no whitelisted verifiers, hence this contract is not used in practice."},{"name":"CanonicalTransactionChain","address":"0x56a76bcC92361f6DF8D75476feD8843EdC70e1C9","chain":"ethereum","description":"The Canonical Transaction Chain (CTC) contract is an append-only log of transactions which must be applied to the OVM state. Given that transactions batch hashes are sent to an EOA address, it allows any account to enqueue() a transaction, which the Sequencer must eventually append to the rollup state."},{"name":"StateCommitmentChain","address":"0xA2FaAAC9120c1Ff75814F0c6DdB119496a12eEA6","upgradeability":{"proxyType":"EIP1967 proxy","admins":["0x48fE1f85ff8Ad9D088863A42Af54d06a1328cF21"],"implementations":["0x6b1Cd90796Dc97C859734dDA4fF7816f703DDb48"]},"chain":"ethereum","description":"The State Commitment Chain (SCC) stores a list of proposed state roots in a linked ChainStorageContainer contract. Only a permissioned state root proposer (MVM_Proposer) can submit new state roots."},{"name":"ChainStorageContainer-CTC-batches","address":"0x38473Feb3A6366757A249dB2cA4fBB2C663416B7"},{"name":"ChainStorageContainer-CTC-queue","address":"0xA91Ea6F5d1EDA8e6686639d6C88b309cF35D2E57"},{"name":"ChainStorageContainer-SCC-batches","address":"0x10739F09f6e62689c0aA8A1878816de9e166d6f9"},{"name":"BondManager","address":"0x595801b85628ec6979C420988b8843A40F850528","chain":"ethereum","description":"The Bond Manager contract will handle deposits in the form of an ERC20 token from bonded Proposers. It will also handle the accounting of gas costs spent by a Verifier during the course of a challenge. In the event of a successful challenge, the faulty Proposer's bond will be slashed, and the Verifier's gas costs will be refunded. Current mock implementation allows only OVM_Proposer to propose new state roots. No slashing is implemented."},{"name":"L1CrossDomainMessenger","address":"0x081D1101855bD523bA69A9794e0217F0DB6323ff","upgradeability":{"proxyType":"resolved delegate proxy","admins":[],"implementations":["0x8bF439ef7167023F009E24b21719Ca5f768Ecb36"],"immutable":false},"chain":"ethereum","description":"The L1 Cross Domain Messenger (L1xDM) contract sends messages from L1 to Metis, and relays messages from Metis onto L1. In the event that a message sent from L1 to Metis is rejected for exceeding the Metis epoch gas limit, it can be resubmitted via this contract's replay function."},{"name":"MVM_DiscountOracle","address":"0x7f6B0b7589febc40419a8646EFf9801b87397063","chain":"ethereum","description":"Oracle specifying user fees for sending L1 -> Metis messages and other parameters for cross-chain communication."},{"name":"Lib_AddressManager","address":"0x918778e825747a892b17C66fe7D24C618262867d","chain":"ethereum","description":"This is a library that stores the mappings between names such as OVM_Sequencer, OVM_Proposer and other contracts and their addresses."},{"name":"MVM_L2ChainManagerOnL1","address":"0xf3d58D1794f2634d6649a978f2dc093898FEEBc0","upgradeability":{"proxyType":"EIP1967 proxy","admins":["0x48fE1f85ff8Ad9D088863A42Af54d06a1328cF21"],"implementations":["0x7b5AFdA01ef32d95858A22E5fc0a6821A12CDAe5"]},"chain":"ethereum","description":"Contract that allows METIS_MANAGER to switch Sequencer."},{"name":"L1StandardBridge","address":"0x3980c9ed79d2c191A89E02Fa3529C60eD6e9c04b","upgradeability":{"proxyType":"EIP1967 proxy","admins":["0x48fE1f85ff8Ad9D088863A42Af54d06a1328cF21"],"implementations":["0xa0cfE8Af2AB5C9232714647702DbACf862EA4798"]},"chain":"ethereum","description":"Main entry point for users depositing ERC20 tokens and ETH that do not require custom gateway."},{"name":"LockingPool","address":"0xD54c868362C2098E0E46F12E7D924C6A332952Dd","upgradeability":{"proxyType":"EIP1967 proxy","admins":["0x8FbB8D00f7621B68F219B0B18738F07aF513D5C8"],"implementations":["0xD8f38c831E5032d23065Eaaee8c0620e17c04D60"]},"chain":"ethereum","description":"Contract allowing users to lock tokens to apply to become a sequencer, receive rewards, unlock tokens to exit the sequencer, reward distribution."},{"name":"LockingInfo","address":"0x0fe382b74C3894B65c10E5C12ae60Bbd8FAf5b48","upgradeability":{"proxyType":"EIP1967 proxy","admins":["0x8FbB8D00f7621B68F219B0B18738F07aF513D5C8"],"implementations":["0x0D30F0d7934f53aaF6a1630A4c109AF4513a65cC"]},"chain":"ethereum","description":"Contract acting as an escrow for METIS tokens managed by LockingPool."}],"risks":[{"category":"Funds can be stolen if","text":"a contract receives a malicious code upgrade. There is no delay on code upgrades.","isCritical":true}]},"milestones":[{"name":"Mainnet launch","link":"https://metisdao.medium.com/metis-to-launch-andromeda-honoring-our-commitment-to-decentralization-fa2d03394398","date":"2021-11-19T00:00:00Z","description":"Public launch of Metis Layer 2 Andromeda, based on the Optimism codebase.","type":"general"},{"name":"Data availability change","link":"https://metisdao.medium.com/decentralized-storage-goes-live-da876dc6eb70","date":"2022-04-12T00:00:00Z","description":"Update moving data to an off-chain committee.","type":"general"},{"name":"Data hashes posted to EOA","link":"https://etherscan.io/address/0xFf00000000000000000000000000000000001088","date":"2023-03-15T00:00:00Z","description":"Hashes to data blobs are now posted to EOA address instead of CanonicalTransactionChain contract.","type":"general"}]}