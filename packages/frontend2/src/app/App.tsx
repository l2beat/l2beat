import { HomePage } from './home/HomePage'
import { ProductPage } from './product/ProductPage'

type Pages = typeof pages
export type SsrData = {
  [K in keyof Pages]: {
    page: K
    props: Parameters<Pages[K]>[0]
  }
}[keyof Pages]

const pages = {
  HomePage,
  ProductPage,
}

export function App({ ssrData }: { ssrData: SsrData }) {
  const Page = pages[ssrData.page]
  // @ts-expect-error TypeScript is not smart enough yet
  return <Page {...ssrData.props} />
}
