import { assert, type Sentiment } from '@l2beat/shared-pure'
import React from 'react'
import { sentimentToFillColor } from '~/utils/sentiment'
import { UpcomingBadge } from '../../badge/upcoming-badge'

export interface Props {
  values: Sentiment[]
  isUpcoming?: boolean
  className?: string
  isUnderReview?: boolean
}

export function SmallPizzaRosette({
  values,
  className,
  isUpcoming,
  isUnderReview,
}: Props) {
  if (isUpcoming) {
    return <UpcomingBadge className={className} isShort={true} />
  }

  const [first, second, third, fourth, fifth] = values
  assert(first && second && third && fourth && fifth, 'Invalid number of risks')

  return (
    <svg
      width="31"
      height="30"
      viewBox="0 0 31 30"
      alt-text="Rosette showing risk summary"
      className={className}
    >
      <path
        d="M13.6396 16.5301C14.1235 16.3737 14.6195 16.734 14.6203 17.2426L14.6393 29.1709C14.64 29.6134 14.2613 29.9553 13.8246 29.8834C12.3495 29.6405 9.1625 28.9365 6.6835 27.1354C3.98662 25.176 2.44301 22.4522 1.82389 21.1716C1.637 20.785 1.84661 20.3411 2.25519 20.2091L13.6396 16.5301Z"
        className={sentimentToFillColor(first)}
      />
      <path
        d="M13.5475 13.7202C13.8415 14.1351 13.6462 14.7161 13.1612 14.8691L1.78553 18.4578C1.36348 18.591 0.923865 18.332 0.861775 17.8938C0.652045 16.4137 0.369734 13.162 1.34618 10.2576C2.40848 7.09781 4.54539 4.80971 5.58199 3.8356C5.89489 3.54156 6.38109 3.6087 6.62939 3.95902L13.5475
        13.7202Z"
        className={sentimentToFillColor(second)}
      />
      <path
        d="M16.1218 12.6975C15.824 13.1098 15.211 13.1124 14.9096 12.7028L7.84131 3.09432C7.57901 2.73784 7.68231 2.23816 8.07691 2.03796C9.41021 1.36171 12.3966 0.0449563 15.4608 0.0316763C18.7943 0.0172163 21.6497 1.30117 22.9062 1.96788C23.2855 2.16914 23.379 2.65101 23.1275 2.99909L16.1218 12.6975Z"
        className={sentimentToFillColor(third)}
      />
      <path
        d="M17.8554 14.8216C17.3732 14.6599 17.1884 14.0755 17.4898 13.6659L24.5611 4.05961C24.8234 3.70319 25.3312 3.65312 25.6397 3.9704C26.6819 5.04211 28.8273 7.50181 29.7514 10.4233C30.7567 13.6017 30.3802 16.7098 30.1174 18.1077C30.038 18.5297 29.6057 18.7622 29.1986 18.6257L17.8554 14.8216Z"
        className={sentimentToFillColor(fourth)}
      />
      <path
        d="M16.3566 17.2429C16.354 16.7344 16.8476 16.3708 17.3325 16.5239L28.7071 20.116C29.1291 20.2493 29.3404 20.7137 29.1397 21.1081C28.4617 22.4405 26.8261 25.265 24.3593 27.0826C21.6755 29.0599 18.6122 29.7068 17.2043 29.9093C16.7793 29.9704 16.4197 29.6363 16.4175 29.2069L16.3566 17.2429Z"
        className={sentimentToFillColor(fifth)}
      />

      {isUnderReview && (
        <>
          <path
            d="M13.72 18.5C13.6539 18.4996 13.5885 18.4862 13.5276 18.4605C13.4667 18.4348 13.4115 18.3974 13.365 18.3504C13.3186 18.3033 13.2819 18.2476 13.257 18.1864C13.2321 18.1251 13.2195 18.0596 13.22 17.9935C13.2265 16.6435 13.27 16.0995 13.5405 15.4435C13.8968 14.647 14.4296 13.9419 15.0985 13.3815C15.5885 12.9805 16.0211 12.5139 16.384 11.995C16.581 11.6985 16.6966 11.3553 16.719 11C16.7425 10.7973 16.7199 10.592 16.6528 10.3993C16.5858 10.2066 16.476 10.0315 16.3317 9.8873C16.1875 9.743 16.0124 9.6332 15.8197 9.5661C15.627 9.4991 15.4217 9.4765 15.219 9.5C14.204 9.5 13.83 10.278 13.7335 11.0465C13.7206 11.1699 13.6629 11.2842 13.5713 11.3678C13.4797 11.4514 13.3605 11.4985 13.2365 11.5H10.223C10.1554 11.4994 10.0886 11.4853 10.0266 11.4585C9.9646 11.4316 9.9086 11.3925 9.8619 11.3436C9.8153 11.2947 9.779 11.2369 9.7551 11.1737C9.7312 11.1104 9.7203 11.043 9.723 10.9755C9.793 8.9895 10.2815 8.1205 11.2325 7.243C12.1955 6.3545 13.4035 6 15.219 6C17.072 6 18.2645 6.35 19.206 7.177C19.7154 7.644 20.1153 8.2179 20.3769 8.8576C20.6384 9.4972 20.7553 10.1869 20.719 10.877C20.7208 11.5954 20.5531 12.3041 20.2295 12.9455C19.8028 13.7149 19.2539 14.4099 18.6045 15.0035L17.672 15.891C17.0911 16.4578 16.7553 17.2296 16.7365 18.041C16.7261 18.1656 16.6694 18.2818 16.5776 18.3667C16.4858 18.4515 16.3655 18.4989 16.2405 18.4995L13.72 18.5Z"
            fill="url(#paint0_linear_10_20)"
          />
          <path
            d="M14.9688 24C16.2114 24 17.2188 22.9926 17.2188 21.75C17.2188 20.5074 16.2114 19.5 14.9688 19.5C13.7261 19.5 12.7188 20.5074 12.7188 21.75C12.7188 22.9926 13.7261 24 14.9688 24Z"
            fill="url(#paint1_linear_10_20)"
          />

          <defs>
            <linearGradient
              id="paint0_linear_10_20"
              x1="15.2205"
              y1="6"
              x2="15.2205"
              y2="18.5"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#FFD044" />
              <stop offset="1" stopColor="#FFC109" />
            </linearGradient>
            <linearGradient
              id="paint1_linear_10_20"
              x1="14.9688"
              y1="19.5"
              x2="14.9688"
              y2="24"
              gradientUnits="userSpaceOnUse"
            >
              <stop stopColor="#FFD045" />
              <stop offset="1" stopColor="#FFC107" />
            </linearGradient>
            <clipPath id="clip0_10_20">
              <rect width="31" height="30" fill="white" />
            </clipPath>
          </defs>
        </>
      )}
    </svg>
  )
}
